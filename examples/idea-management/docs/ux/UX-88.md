# UX Design: Idea Management API

**Feature**: #88  
**Epic**: #88  
**Status**: Approved  
**Designer**: UX Designer Agent  
**Date**: 2026-01-18  
**Related PRD**: [PRD-88.md](../prd/PRD-88.md)  
**Related ADR**: [ADR-88.md](../adr/ADR-88.md)  
**Related Spec**: [SPEC-88.md](../specs/SPEC-88.md)

---

## Table of Contents

1. [Overview](#1-overview)
2. [User Research](#2-user-research)
3. [User Flows](#3-user-flows)
4. [API Design Patterns](#4-api-design-patterns)
5. [Error Handling & Feedback](#5-error-handling--feedback)
6. [Documentation Experience](#6-documentation-experience)
7. [Developer Experience](#7-developer-experience)
8. [Accessibility](#8-accessibility)
9. [Implementation Notes](#9-implementation-notes)
10. [References](#10-references)

---

## 1. Overview

### Feature Summary
This document defines the **Developer Experience (DX)** for the Idea Management API. Since this is a backend API without a visual UI, "UX" refers to the experience of developers consuming the API—including endpoint design, error messages, documentation clarity, and workflow intuitiveness.

### Design Goals
1. **Intuitive REST Design**: Follow RESTful conventions so developers can predict endpoints
2. **Clear Error Messages**: Provide actionable error responses with validation details
3. **Self-Documenting**: OpenAPI/Swagger docs allow API exploration without external docs
4. **Minimal Learning Curve**: Developers can integrate in <30 minutes

### Success Criteria
- Developers can make first successful API call within 5 minutes
- Error messages pinpoint exact field validation issues (no guessing)
- Swagger UI allows complete API exploration without reading code
- Time to integrate full workflow (create → approve → complete) < 30 minutes

---

## 2. User Research

### Primary Persona: Backend Developer
- **Role**: Integrating Idea Management into existing application
- **Technical Level**: Familiar with REST APIs, JSON, HTTP status codes
- **Goals**: 
  - Understand API capabilities quickly
  - Handle errors gracefully
  - Test endpoints interactively before coding
- **Pain Points**: 
  - Cryptic error messages ("Bad Request" without details)
  - Undocumented required fields
  - Unclear workflow state transitions
  - No interactive documentation

### Secondary Persona: QA Engineer
- **Role**: Testing API behavior for edge cases
- **Technical Level**: Familiar with HTTP, can read API docs
- **Goals**:
  - Understand valid state transitions
  - Test validation rules (what inputs are rejected?)
  - Verify error handling
- **Pain Points**:
  - Missing validation details in docs
  - No examples for edge cases
  - Unclear which transitions are allowed

### Tertiary Persona: Product Manager (API Consumer)
- **Role**: Understanding API capabilities for integration planning
- **Technical Level**: Basic HTTP knowledge, reads Swagger docs
- **Goals**:
  - See what the API can do (features list)
  - Understand workflow (state transitions)
  - Assess integration complexity
- **Pain Points**:
  - Technical jargon in docs
  - Missing business context (why these states?)
  - No high-level overview

---

## 3. User Flows

### Flow 1: First-Time API Exploration

```
Developer lands on API → Opens Swagger UI → Sees 7 endpoints
  ↓
Expands POST /api/ideas → Sees request schema with examples
  ↓
Clicks "Try it out" → Enters sample data → Submits
  ↓
Receives 201 Created with idea JSON → Copies ID
  ↓
Expands GET /api/ideas/{id} → Enters copied ID → Submits
  ↓
Receives 200 OK with full idea details
  ↓
Developer thinks: "This was easy, I can integrate this!"
```

**Design Decision**: Swagger UI is default landing page (`/swagger`) with examples pre-filled.

### Flow 2: Submit and Approve Idea (Happy Path)

```
Client Code:
  ↓
POST /api/ideas { title, description, businessCase }
  ↓ Validates input (FluentValidation)
  ↓ Returns 201 Created + Location header + idea JSON (state: Draft)
  ↓
Client stores idea.id = 42
  ↓
POST /api/ideas/42/transition { newState: "UnderReview" }
  ↓ Validates transition (Draft → UnderReview allowed)
  ↓ Returns 200 OK + updated idea JSON (state: UnderReview)
  ↓
POST /api/ideas/42/transition { newState: "Approved" }
  ↓ Validates transition (UnderReview → Approved allowed)
  ↓ Returns 200 OK + updated idea JSON (state: Approved)
  ↓
Success! Idea is approved.
```

**UX Consideration**: Each response includes the full idea object, so clients don't need to make additional GET requests.

### Flow 3: Invalid State Transition (Error Path)

```
Client Code:
  ↓
POST /api/ideas/42/transition { newState: "Approved" }
  ↓ Current state: Draft
  ↓ Attempt: Draft → Approved (INVALID, must go through UnderReview)
  ↓
API Returns 400 Bad Request:
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.1",
  "title": "Invalid State Transition",
  "status": 400,
  "detail": "Cannot transition from Draft to Approved. Valid transitions: UnderReview",
  "instance": "/api/ideas/42/transition",
  "errors": {
    "currentState": "Draft",
    "requestedState": "Approved",
    "allowedStates": ["UnderReview"]
  }
}
```

**UX Consideration**: Error response includes:
- **Detail**: Human-readable explanation
- **Errors**: Machine-readable context (current state, allowed states)
- **Instance**: Which endpoint failed (useful for logs)

---

## 4. API Design Patterns

### 4.1 RESTful Resource Naming

| Endpoint | Resource | Action |
|----------|----------|--------|
| `POST /api/ideas` | Collection | Create new idea |
| `GET /api/ideas` | Collection | List ideas (filtered/paginated) |
| `GET /api/ideas/{id}` | Single Resource | Get specific idea |
| `PUT /api/ideas/{id}` | Single Resource | Update idea |
| `DELETE /api/ideas/{id}` | Single Resource | Delete idea |
| `POST /api/ideas/{id}/transition` | Sub-Resource Action | Change state (RPC-style) |
| `GET /api/ideas/similar` | Collection Filter | Find similar ideas |

**Design Rationale:**
- **Standard CRUD**: Developers expect POST/GET/PUT/DELETE for basic operations
- **Sub-Resource Actions**: `/transition` is RPC-style for non-standard actions (acceptable pattern)
- **Plural Nouns**: `/ideas` (not `/idea`) follows REST conventions

### 4.2 HTTP Status Codes

| Status | When Used | Example |
|--------|-----------|---------|
| `200 OK` | Successful GET, PUT, state transition | GET /api/ideas/42 |
| `201 Created` | Successful POST (resource created) | POST /api/ideas |
| `204 No Content` | Successful DELETE (no body) | DELETE /api/ideas/42 |
| `400 Bad Request` | Validation error, invalid transition | POST /api/ideas (missing title) |
| `404 Not Found` | Resource doesn't exist | GET /api/ideas/9999 |
| `500 Internal Server Error` | Unexpected server error | Database connection failure |

**Design Rationale**: Follow HTTP semantics precisely so developers can rely on status codes.

### 4.3 Request/Response Consistency

**All responses include full resource representations:**

```json
// POST /api/ideas response
{
  "id": 42,
  "title": "Implement OAuth",
  "description": "...",
  "workflowState": "Draft",
  "createdAt": "2026-01-18T10:30:00Z",
  "updatedAt": "2026-01-18T10:30:00Z",
  "businessCase": { /* full object */ }
}
```

**Benefit**: Clients get updated data without additional GET requests (reduces round-trips).

---

## 5. Error Handling & Feedback

### 5.1 Validation Errors (400 Bad Request)

**Example: Missing Required Fields**

Request:
```json
POST /api/ideas
{
  "title": "Test"  // Missing description, businessCase
}
```

Response:
```json
HTTP/1.1 400 Bad Request
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.1",
  "title": "One or more validation errors occurred.",
  "status": 400,
  "errors": {
    "Title": ["Title must be at least 5 characters"],
    "Description": ["Description is required"],
    "BusinessCase.ExpectedRevenue": ["Expected revenue is required"],
    "BusinessCase.EstimatedInvestment": ["Estimated investment is required"]
  }
}
```

**UX Benefits:**
- ✅ Pinpoints exact fields with errors
- ✅ Provides actionable messages ("Title must be at least 5 characters" not "Invalid title")
- ✅ Structured format (easy to parse programmatically)

### 5.2 Not Found Errors (404)

**Example: Non-Existent Idea**

Request:
```http
GET /api/ideas/9999 HTTP/1.1
```

Response:
```json
HTTP/1.1 404 Not Found
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.4",
  "title": "Resource Not Found",
  "status": 404,
  "detail": "Idea with ID 9999 was not found.",
  "instance": "/api/ideas/9999"
}
```

**UX Benefits:**
- ✅ Clear message (not generic "Not Found")
- ✅ Includes requested ID in detail
- ✅ Follows RFC 7807 Problem Details standard

### 5.3 Invalid State Transitions (400)

**Example: Skipping Review Step**

Request:
```json
POST /api/ideas/42/transition
{
  "newState": "Approved"  // Current state: Draft
}
```

Response:
```json
HTTP/1.1 400 Bad Request
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.1",
  "title": "Invalid State Transition",
  "status": 400,
  "detail": "Cannot transition from Draft to Approved. Valid next states: UnderReview",
  "instance": "/api/ideas/42/transition",
  "errors": {
    "currentState": "Draft",
    "requestedState": "Approved",
    "allowedStates": ["UnderReview"]
  }
}
```

**UX Benefits:**
- ✅ Explains WHY transition is invalid
- ✅ Shows current state (helps debugging)
- ✅ Lists allowed states (developer knows what to do next)

---

## 6. Documentation Experience

### 6.1 OpenAPI/Swagger UI

**Default Landing Page**: `http://localhost:5000/swagger`

**Features:**
- **Interactive Testing**: "Try it out" buttons for all endpoints
- **Request Examples**: Pre-filled with valid data
- **Response Examples**: Shows 200, 400, 404 examples
- **Schema Documentation**: Explains each field (type, min/max length, required)

**Example Swagger Annotation:**

```csharp
/// <summary>
/// Creates a new idea in Draft state
/// </summary>
/// <param name="dto">Idea details including business case</param>
/// <returns>Created idea with assigned ID</returns>
/// <response code="201">Idea created successfully</response>
/// <response code="400">Validation error (missing/invalid fields)</response>
[HttpPost]
[ProducesResponseType(StatusCodes.Status201Created)]
[ProducesResponseType(StatusCodes.Status400BadRequest)]
public async Task<ActionResult<Idea>> CreateIdea([FromBody] CreateIdeaDto dto)
{
    // Implementation
}
```

### 6.2 README Quick Start

**Goal**: Developer can make first API call in 5 minutes

**Quick Start Section:**
```markdown
## Quick Start

### 1. Run the API
```bash
cd examples/idea-management/src/IdeaManagement
dotnet run
```

### 2. Open Swagger UI
Navigate to: http://localhost:5000/swagger

### 3. Try Your First Request
Click "POST /api/ideas" → "Try it out" → "Execute"
```

**UX Benefit**: No setup required, instant gratification.

---

## 7. Developer Experience

### 7.1 Predictable Workflow

**State Machine Visual (in README):**

```
Draft
  ↓ (PM reviews)
UnderReview
  ├─ Approved (PM approves)
  └─ Rejected (PM rejects)
      ↓
    InProgress (Engineer starts)
      ↓
    Completed (Engineer finishes)
```

**Benefit**: Developers understand workflow before writing code.

### 7.2 Pagination & Filtering

**GET /api/ideas Query Parameters:**

```
GET /api/ideas?page=2&pageSize=20&status=Draft&riskLevel=High
```

**Response Includes Pagination Metadata:**

```json
{
  "data": [ /* ideas array */ ],
  "pagination": {
    "currentPage": 2,
    "pageSize": 20,
    "totalPages": 5,
    "totalItems": 93
  }
}
```

**UX Benefit**: Clients can implement pagination UI without guessing total count.

### 7.3 Consistent Date Formats

**All timestamps in ISO 8601 UTC:**

```json
{
  "createdAt": "2026-01-18T10:30:00Z",
  "updatedAt": "2026-01-18T14:45:00Z"
}
```

**Benefit**: No timezone confusion, standard parsing in all languages.

---

## 8. Accessibility

### For API Developers (Documentation Accessibility)

- **Screen Reader Friendly**: Swagger UI supports keyboard navigation
- **High Contrast**: Code examples use clear syntax highlighting
- **Plain Language**: Documentation avoids jargon where possible
- **Structured Headings**: Proper HTML heading hierarchy in generated docs

### For End Users (Future UI Considerations)

*Note: Current implementation is API-only, but if a UI is added:*

- **WCAG 2.1 AA Compliance**: Color contrast ratios ≥ 4.5:1
- **Keyboard Navigation**: All actions accessible via keyboard
- **ARIA Labels**: Screen reader support for interactive elements
- **Form Validation**: Accessible error messages linked to form fields

---

## 9. Implementation Notes

### 9.1 Swagger Configuration

**Enabled by default in Development:**

```csharp
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI(c =>
    {
        c.SwaggerEndpoint("/swagger/v1/swagger.json", "Idea Management API v1");
        c.RoutePrefix = string.Empty; // Swagger UI at root URL
    });
}
```

**Production**: Disable Swagger for security (internal API only).

### 9.2 CORS for Frontend Integration

**Development**: Allow all origins for testing

```csharp
builder.Services.AddCors(options =>
{
    options.AddDefaultPolicy(policy =>
        policy.AllowAnyOrigin().AllowAnyMethod().AllowAnyHeader());
});
```

**Production**: Restrict to specific frontend domains

```csharp
policy.WithOrigins("https://app.example.com")
      .AllowMethods("GET", "POST", "PUT", "DELETE")
      .AllowHeaders("Content-Type", "Authorization");
```

### 9.3 Content Negotiation

**Default**: JSON (application/json)

**Future**: Support XML (application/xml) if needed

```csharp
builder.Services.AddControllers()
    .AddXmlSerializerFormatters(); // Add XML support
```

---

## 10. References

### Internal
- [PRD-88: Product Requirements](../prd/PRD-88.md)
- [ADR-88: Architecture Decisions](../adr/ADR-88.md)
- [SPEC-88: Technical Specification](../specs/SPEC-88.md)
- [README: Quick Start Guide](../../examples/idea-management/README.md)

### External
- [RESTful API Best Practices](https://restfulapi.net/)
- [RFC 7807: Problem Details for HTTP APIs](https://tools.ietf.org/html/rfc7807)
- [OpenAPI Specification](https://swagger.io/specification/)
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

---

## Open Questions

1. **Q: Should we add HATEOAS links for state transitions?**
   - **Answer**: No - HATEOAS adds complexity without clear benefit for this demo

2. **Q: Should we support batch operations (create multiple ideas)?**
   - **Answer**: No - Out of scope for MVP, can add in v2

3. **Q: Should we version the API (/api/v1/ideas)?**
   - **Answer**: No - Demo is v1-only, versioning adds unnecessary complexity

---

**Author**: UX Designer Agent  
**Last Updated**: 2026-01-18

**Note**: This UX document focuses on **Developer Experience (DX)** since the Idea Management System is a backend API without a visual UI. The "user" is a developer consuming the API, and their "experience" is measured by API intuitiveness, documentation clarity, and error message quality.
